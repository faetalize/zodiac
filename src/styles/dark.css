/* Dark theme styles */
@media (prefers-color-scheme: dark) {
    :root {
        color-scheme: dark;
        --code-block-bg: transparent;
        --code-block-border: rgba(118, 160, 227, 0.22);
        --code-toolbar-bg: rgba(54, 78, 117, 0.35);
        --code-toolbar-fg: #d7e7ff;
        --code-copy-hover: rgba(118, 160, 227, 0.28);
        --code-copy-success: #7fc4ff;
        --inline-code-border: #ffffff42;
        --message-drop-border: rgba(118, 160, 227, 0.65);
        --message-drop-bg: rgba(34, 72, 107, 0.45);
    }

    :focus-visible{
        border: 1px solid #8f9eb3;
        outline: none;
    }

    .message-text:focus-visible {
        outline: 1px solid #8f9eb3a6;
    }


    body {
        background-color: #12171d;
        color: #e4e4e4;
    }

    a {
        color: #92d9eb;
    }

    .sidebar {
        background-color: #1a2733d5;
        backdrop-filter: blur(64px);
    }

    .navbar {
        background-color: #00000047;
    }

    .navbar-tab {
        color: #e4e4e4;
    }

    .navbar-tab-highlight {
        background-color: #22486b;
        box-shadow: 0 0 1rem 0.05rem #29292aac;
    }

    .navbar-tab:not(.navbar-tab-active):hover {
        background-color: #00000042;
    }

    button {
        background-color: #5f96c8;
        color: #0b2469;
    }

    button:hover {
        background-color: #5280ac;
    }

    button:active {
        background-color: #3a648b;
    }

    .toast {
        --toast-fg: #f7fbff;
        box-shadow: 0 24px 48px rgba(0, 0, 0, 0.45);
    }

    .toast--normal {
        --toast-normal-bg: rgba(21, 35, 49, 0.8);
        --toast-normal-border: rgba(136, 172, 227, 0.32);
        --toast-normal-action-bg: rgba(136, 172, 227, 0.24);
        --toast-normal-action-bg-hover: rgba(136, 172, 227, 0.34);
        --toast-normal-close-hover: rgba(136, 172, 227, 0.22);
    }

    .toast--warning {
        --toast-warning-bg: rgba(92, 61, 12, 0.8);
        --toast-warning-border: rgba(255, 214, 132, 0.45);
        --toast-warning-action-bg: rgba(255, 214, 132, 0.28);
        --toast-warning-action-bg-hover: rgba(255, 214, 132, 0.37);
        --toast-warning-close-hover: rgba(255, 214, 132, 0.26);
    }

    .toast--danger {
        --toast-danger-bg: rgba(94, 18, 22, 0.8);
        --toast-danger-border: rgba(255, 179, 189, 0.45);
        --toast-danger-action-bg: rgba(255, 179, 189, 0.3);
        --toast-danger-action-bg-hover: rgba(255, 179, 189, 0.4);
        --toast-danger-close-hover: rgba(255, 179, 189, 0.28);
    }

    .btn-toggled {
        background: #166bb1b0 !important;
    }


    .btn-textual {
        color: #e4e4e4;
        text-shadow: 0 0 10px #000000, 0 0 5px #181818;
    }

    .btn-textual:hover {
        text-shadow: 0 0 10px #ffffff, 0 0 5px #dfdfdf;
    }

    input,
    textarea,
    select {
        background-color: #283542;
        border: 1px solid #b6b6b62f;
        color: #e4e4e4;
    }

    input::placeholder,
    textarea::placeholder {
        color: #849caf;
    }


    .message:not(.message-model) {
        background-color: #1a2733;
    }

    /* LoRA metadata cards (dark) */
    .card-lora {
        background-color: #162334;
        border: 1px solid rgba(80, 134, 194, 0.35);
        box-shadow: 0 8px 24px rgba(4, 15, 32, 0.25);
    }

    .lora-card-meta,
    .lora-card-section-title {
        color: #9ab9d8;
    }

    .lora-card-toggle span,
    .lora-strength-label,
    .lora-strength-value {
        color: #cbdff6;
    }

    .lora-card-trigger {
        background-color: #253a5c;
        border-color: rgba(43, 110, 162, 0.55);
        color: #d1ecff;
    }

    .lora-card-trigger:hover {
        background-color: #315077;
    }

    .lora-card-trigger[data-copied="true"] {
        background-color: #3b6ca1;
        border-color: #5b8fce;
        color: #ffffff;
    }

    .lora-card-empty {
        color: #9ab9d8;
    }

    .lora-card-delete {
        background-color: rgba(37, 58, 92, 0.6);
        border-color: rgba(58, 97, 150, 0.55);
        color: #d1ecff;
    }

    .lora-card-delete:hover {
        background-color: rgba(40, 82, 135, 0.7);
    }

    .lora-card-delete:active {
        transform: translateY(1px);
    }

    .lora-strength-slider {
        accent-color: #7cabff;
    }

    .badge {
        background-color: #253a5c;
        border: 1px solid rgba(35, 108, 119, 0.508);
        color: #b6ebfb;
    }

    /* Keep subscription badge background unchanged on hover */
    #subscription-badge.badge-tier-free:hover {
        background-color: #253a5c !important;
    }
    #subscription-badge.badge-tier-pro:hover {
        background-color: #164321 !important;
    }
    #subscription-badge.badge-tier-max:hover {
        background-color: #3a255c !important;
    }

    /* Subscription badge tiers */
    .badge-tier-free {
        background-color: #253a5c;
        border-color: rgba(35, 108, 119, 0.508);
        color: #b6ebfb;
    }
    .badge-tier-pro {
        background-color: #164321;
        border-color: #1f6b31;
        color: #b7f5c8;
    }
    .badge-tier-max {
        background-color: #3a255c;
        border-color: #6c4fb0;
        color: #e3d3ff;
    }

    .input-radio-currentchat:checked+label {
        background-color: #0f4c84b2;
        color: #bcdbf7;
    }

    .label-currentchat:hover {
        background-color: #597c9124;
    }

    .overlay {
        background-color: #00000082;
    }

    #message-box {
        background-color: #1b2935c0 !important;
        backdrop-filter: blur(16px);
    }

    /* Subscription card theming (dark) */
    #subscription-status-row{
        background-color: #0e1a24;
        border-color: #2a3a45;
    }
    /* Info profile card (dark) */
    #profile-info-card{
        background-color: #0e1a24;
        border-color: #2a3a45;
    }
    .subscription-card-header{ background-color: transparent; }
    .subscription-card-body{ background-color: transparent; }
    .subscription-card-footer{ background-color: transparent; }

    #messageInput {
        background-color: #283542b6;
    }

    #btn-add-tone-example {
        background-color: #283542;
        border: 1px solid #b6b6b62f;
        color: #849caf;
    }

    #btn-add-tone-example:hover {
        background-color: #1a2733;
    }

    .api-key-valid {
        border: 1px solid #137e3ab0;
    }

    .api-key-invalid {
        border: 1px solid #bf121cad;
    }

    .api-key-error {
        color: #ff4a53;
    }

    .card-add-personality {
        background-color: rgba(40, 78, 125, 0.4);
        border: 1px dashed rgba(95, 150, 200, 0.3);
    }

    .card-add-personality:hover {
        background-color: rgba(48, 103, 170, 0.4);
        border-color: rgba(95, 150, 200, 0.6);
    }

    .card-add-personality .add-icon {
        color: #5f96c8;
    }

    .attachment-container {
        background-color: #060d1447;
        outline: 1px solid #ffffff1c;
    }

    /* LoRA add card (dark) */
    .card-add-lora {
        background-color: rgba(40, 78, 125, 0.25);
        border: 1px solid rgba(95, 150, 200, 0.3);
    }

    #dialog{
        background-color: #461010;
    }

     #profile-pfp {
        filter: invert(1);
    }

    #profile-pfp[src]:not([src=""]):not([src="undefined"]):not([src="null"]):not([src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="]){
        filter: invert(0);
    }

    /* Toggle Switch Styles for Dark Theme */
    input[type="checkbox"] {
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;
        width: 3rem;
        height: 1.5rem;
        border-radius: 0.75rem;
        background-color: #3a3a3a;
        border: 2px solid #505050;
        position: relative;
        cursor: pointer;
        transition: all 0.3s ease;
        outline: none;
    }

    input[type="checkbox"]:focus-visible {
        box-shadow: 0 0 0 2px #8f9eb3;
        border-color: #8f9eb3;
    }

    input[type="checkbox"]::before {
        content: '';
        position: absolute;
        width: 1.1rem;
        height: 1.1rem;
        border-radius: 50%;
        background-color: #e4e4e4;
        left: 0.1rem;
        top: 50%;
        transform: translateY(-50%);
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
    }

    input[type="checkbox"]:checked {
        background-color: #5f96c8;
        border-color: #5280ac;
    }

    input[type="checkbox"]:checked::before {
        left: 1.7rem;
        background-color: #ffffff;
    }

    input[type="checkbox"]:hover {
        background-color: #454545;
    }

    input[type="checkbox"]:checked:hover {
        background-color: #5280ac;
    }

    input[type="checkbox"]:disabled {
        opacity: 0.6;
        cursor: not-allowed;
    }

    /* Modern subscription cards dark theme */
    .subscription-card {
        background: linear-gradient(145deg, #1f2937 0%, #111827 100%);
        border-color: #374151;
        color: #e4e4e4;
    }

    .subscription-card:hover {
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
    }

    .subscription-card-popular {
        border-color: #667eea;
        box-shadow: 0 15px 50px rgba(102, 126, 234, 0.3);
    }

    .subscription-card-popular:hover {
        box-shadow: 0 25px 70px rgba(102, 126, 234, 0.4);
    }

    .subscription-header h1 {
        background: linear-gradient(135deg, #8b92ff 0%, #a78bfa 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .tier-badge-free {
        color: #9ca3af;
    }

    .tier-badge-pro {
        background: linear-gradient(135deg, #8b92ff 0%, #a78bfa 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .tier-badge-max {
        background: linear-gradient(135deg, #fb7185 0%, #f472b6 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    /* Chat actions dropdown (dark theme explicit) */
    .chat-actions-menu {
        --chat-actions-menu-bg: rgba(20,25,32,0.92);
        border: 1px solid #ffffff18;
        box-shadow: 0 6px 22px -4px rgba(0,0,0,0.6), 0 2px 8px -2px rgba(0,0,0,0.5);
        color: #e4e4e4;
    }
    .chat-actions-item:hover, .chat-actions-item:focus-visible {
        background: #ffffff12;
    }
    .chat-actions-item:active {
        background: #ffffff1e;
    }

    /* Split button dropdown (dark theme) */
    .split-button__menu {
        --split-button-menu-bg: rgba(20,25,32,0.92);
        border: 1px solid #ffffff18;
        box-shadow: 0 6px 22px -4px rgba(0,0,0,0.6), 0 2px 8px -2px rgba(0,0,0,0.5);
        color: #e4e4e4;
    }
    .split-button__menu-item:hover, .split-button__menu-item:focus-visible {
        background: #ffffff12;
    }
    .split-button__menu-item:active {
        background: #ffffff1e;
    }

    /* Thinking section theming */
    .message-thinking {
        --thinking-border: #3a648b;
        --thinking-bg: #000000;
    }
    .message-thinking pre {
        background: var(--thinking-bg);
    }

    /* Top-up buttons (dark theme) */
    #form-top-up-imagecredits .btn-array-vertical > button {
        background: linear-gradient(145deg, #1f2937 0%, #111827 100%);
        border-color: #374151;
        color: #e5e7eb;
        box-shadow: 0 6px 20px rgba(0,0,0,0.35);
    }
    #form-top-up-imagecredits .btn-array-vertical > button:hover {
        box-shadow: 0 10px 28px rgba(0,0,0,0.45);
        transform: translateY(-1px);
        background: linear-gradient(145deg, #263244 0%, #141b23 100%);
        border-color: #465164;
    }
    #form-top-up-imagecredits .btn-array-vertical > button:active {
        transform: translateY(0);
        box-shadow: 0 8px 22px rgba(0,0,0,0.4);
        background: linear-gradient(145deg, #1b2431 0%, #0f141a 100%);
    }
    #form-top-up-imagecredits .top-up-price { color: #ffffff; }
    #form-top-up-imagecredits .top-up-credits { color: #e8eef7; }
    #form-top-up-imagecredits .top-up-subtitle { color: #a6b2c2; }

}